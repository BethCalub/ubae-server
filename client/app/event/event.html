<div class="confirm" ng-init="eventCtrl.confirm = true" ng-hide="eventCtrl.confirm">
  <h1 style="font-size: 120px;">
    <span class="glyphicon glyphicon-warning-sign"></span>
  </h1>
  <h3 class="animateMe">Are you sure you want to {{eventCtrl.confirmationName}} this entry?</h3>
  <h5 class="animateMe">This action cannot be undone.</h5>
  <br>
  <div class="btn-group">
    <a ng-if="eventCtrl.confirmationName == 'archive'" ng-click="eventCtrl.archiveEntry(eventCtrl.confirmationId); eventCtrl.confirm = true"
      class="btn btn-danger">Yes I'm Sure!</a>
    <a ng-if="eventCtrl.confirmationName == 'delete'" ng-click="eventCtrl.deleteEntry(eventCtrl.confirmationId); eventCtrl.confirm = true"
      class="btn btn-danger">Yes I'm Sure!</a>
    <a ng-if="eventCtrl.confirmationName == 'restore'" ng-click="eventCtrl.unarchiveEntry(eventCtrl.confirmationId); eventCtrl.confirm = true"
      class="btn btn-danger">Yes I'm Sure!</a>
    <a ng-click="eventCtrl.confirm = true" class="btn btn-default">Close</a>
  </div>
</div>

<div class="section" style="padding: 50px 0;">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <ul class="breadcrumb">
          <li>
            <a ui-sref="main">Home</a>
          </li>
          <li class="active">
            {{eventCtrl.dataInfo.name}}
          </li>
        </ul>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div uib-alert style="background-color: #EEEEEE;" ng-show="eventCtrl.dataInfo.show" close="eventCtrl.closeDataInfo()">
          <h1>{{eventCtrl.dataInfo.name}}</h1>
          <p>{{eventCtrl.dataInfo.info}}</p>
          <ul>
            <li ng-repeat="entry in eventCtrl.dataInfo.guide">{{entry}}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="container-fluid" id="eventForm" uib-collapse="!eventCtrl.isCollapsed">
    <form role="form" name="eventForm" novalidate>
      <div class="row">
        <div class="col-md-12">
          <h3>Add/Edit Entry</h3>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <label class="control-label" for="name">Name</label>
            <input type="text" name="name" ng-model="eventCtrl.name" class="form-control" popover-title="Name" uib-popover="The variable 'name' includes office names, department names, programs offered, services offered and scholarships"
              popover-popup-delay="1500" popover-trigger="'mouseenter'" popover-placement="bottom-left" placeholder="Entry Name"
              required>
          </div>
          <div class="form-group has-error">
            <p class="help-block" ng-show="eventForm.name.$invalid && eventForm.name.$touched">
              Please enter a valid name.
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label class="control-label" for="details">Details</label>
            <textarea name="details" ng-model="eventCtrl.details" id="input${1/(\w+)/\u\1/g}" popover-title="Details" uib-popover="The variable 'details' contains the description of data."
              popover-popup-delay="1500" popover-trigger="'mouseenter'" class="form-control" placeholder="Entry Information"
              rows="3" style="resize: none;" required></textarea>
          </div>
          <div class="form-group has-error">
            <p class="help-block" ng-show="eventForm.details.$invalid && eventForm.details.$touched">
              Please enter valid details for this entry.
            </p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label class="control-label" for="message">Message</label>
            <textarea name="message" ng-model="eventCtrl.message" id="input${1/(\w+)/\u\1/g}" popover-title="Message" uib-popover="The 'message' variable contains the sentence form of 'info' which will serve as UBAEs reply. Try to make it witty as possible as to emulate more human-like thinking."
              popover-popup-delay="1500" popover-trigger="'mouseenter'" class="form-control" placeholder="Entry Message" rows="3"
              style="resize: none;" required></textarea>
          </div>
          <div class="form-group has-error">
            <p class="help-block" ng-show="eventForm.message.$invalid && eventForm.message.$touched">
              Please enter a valid message for this entry.
            </p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label class="control-label" for="tags">Tags</label>
            <textarea name="tags" ng-model="eventCtrl.tags" id="input${1/(\w+)/\u\1/g}" popover-title="Keywords" uib-popover="The variable 'tags' contains keywords that will be detected to determine which data UBAE will use as a response to the inquiry. Try to add more tags which are possible keywords."
              popover-popup-delay="1500" popover-trigger="'mouseenter'" class="form-control" placeholder="Entry Keywords" rows="3"
              style="resize: none;" required></textarea>
          </div>
          <div class="form-group has-error">
            <p class="help-block" ng-show="eventForm.tags.$invalid && eventForm.tags.$touched">
              Please enter valid tags for this entry.
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <label class="control-label" for="startDate">Start Date</label>
          <div class="input-group">
            <input type="text" name="startDate" class="form-control" uib-datepicker-popup="longDate" datepicker-options="eventCtrl.startDatePicker.datepickerOptions"
              placeholder="Start Date Ex. 04/20/2017" ng-model="eventCtrl.startDate" is-open="eventCtrl.startDatePicker.isDatepickerOpen"
              ng-required="true" close-text="Close" alt-input-formats="eventCtrl.altInputFormats" popover-title="Start Date"
              uib-popover="The variable 'name' includes office names, department names, programs offered, services offered and scholarships"
              popover-popup-delay="1500" popover-trigger="'mouseenter'" popover-placement="top-left" />
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" ng-click="eventCtrl.startDatePicker.isDatepickerOpen = !eventCtrl.startDatePicker.isDatepickerOpen">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </div>
          <div class="form-group has-error">
            <p class="help-block" ng-show="eventForm.startDate.$invalid && eventForm.startDate.$touched">
              A date is required for an entry.
            </p>
            <p class="help-block" ng-if="eventCtrl.startDate > eventCtrl.endDate && eventForm.startDate.$touched" ng-init="eventCtrl.dateValid = false">
              The start date must be before the end date.
            </p>
          </div>
        </div>
        <div class="col-md-4">
          <label class="control-label" for="endDate">End Date</label>
          <div class="input-group">
            <input type="text" name="endDate" class="form-control" uib-datepicker-popup="longDate" datepicker-options="eventCtrl.endDatePicker.datepickerOptions"
              placeholder="Start Date Ex. 04/20/2017" ng-model="eventCtrl.endDate" is-open="eventCtrl.endDatePicker.isDatepickerOpen"
              ng-required="true" close-text="Close" alt-input-formats="eventCtrl.altInputFormats" popover-title="End Date"
              uib-popover="The variable 'name' includes office names, department names, programs offered, services offered and scholarships"
              popover-popup-delay="1500" popover-trigger="'mouseenter'" popover-placement="top-left" />
            <span class="input-group-btn">
              <button type="button" class="btn btn-default" ng-click="eventCtrl.endDatePicker.isDatepickerOpen = !eventCtrl.endDatePicker.isDatepickerOpen">
                <i class="glyphicon glyphicon-calendar"></i>
              </button>
            </span>
          </div>
          <div class="form-group has-error">
            <p class="help-block" ng-show="eventForm.endDate.$invalid && eventForm.endDate.$touched">
              A date is required for an entry.
            </p>
            <p class="help-block" ng-if="eventCtrl.startDate > eventCtrl.endDate && eventForm.endDate.$touched" ng-init="eventCtrl.dateValid = false">
              The end date must be later than the start date
            </p>
            <p class="help-block" ng-if="eventCtrl.startDate <= eventCtrl.endDate" ng-init="eventCtrl.dateValid = true">
              &nbsp;
            </p>
          </div>
        </div>
        <div class="col-md-4">
          <label class="control-label">&nbsp;
            <span ng-show="!eventCtrl.confirmSave">Are you sure you want to proceed?</span>
          </label>
          <div class="btn-group btn-group-justified" ng-init="eventCtrl.confirmSave = true" ng-show="eventCtrl.confirmSave">
            <a ng-click="eventCtrl.confirmSave = false" ng-hide="eventForm.$invalid || !eventCtrl.dateValid" class="btn btn-danger">Save</a>
            <a ng-click="eventCtrl.resetForm()" class="btn btn-warning">Reset</a>
            <a ng-click="eventCtrl.isCollapsed = false; eventCtrl.resetForm()" class="btn btn-default">Close</a>
          </div>
          <div class="btn-group btn-group-justified" ng-show="!eventCtrl.confirmSave">
            <a ng-click="eventCtrl.saveEntry(); eventCtrl.confirmSave = true" ng-hide="eventForm.$invalid || !eventCtrl.dateValid" class="btn btn-danger">Confirm</a>
            <a ng-click="eventCtrl.confirmSave = true" class="btn btn-default">Cancel</a>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="container-fluid" id="info">
    <div class="row">
      <div class="col-md-12">
        <h4>{{(eventCtrl.entryList | filter: { name: eventCtrl.searchTags, active: eventCtrl.filter.archive.selected }).length}}
          {{eventCtrl.dataInfo.name}} Entries:
          <a ng-click="eventCtrl.isCollapsed = true; eventCtrl.resetForm(); eventCtrl.scrollTo('eventForm')" uib-popover="This action will open the create form." popover-popup-delay="1500"
            popover-trigger="'mouseenter'" popover-placement="right" class="btn btn-link" style="text-decoration: none;" href="">Create New</a>
        </h4>
      </div>
    </div>
    <div class="row">
      <div class="col-md-offset-8 col-md-4">
        <div class="form-group">
          <!-- <label class="sr-only" for="search">Search</label> -->
          <input type="text" class="form-control input-sm" id="search" ng-model="eventCtrl.searchTags" uib-tooltip="Search for information contained in the {{eventCtrl.tableName}} database. This will filter out the information as you type."
            tooltip-placement="bottom" placeholder="Search {{eventCtrl.dataInfo.name}}">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <uib-tabset active="eventCtrl.active">
          <uib-tab index="0" ng-click="eventCtrl.filter.archive.selected = 'true'">
            <uib-tab-heading>
              Active
              <span class="badge">{{(eventCtrl.entryList | filter: { active: 'true' }).length}}</span>
            </uib-tab-heading>
          </uib-tab>
          <uib-tab index="1" ng-click="eventCtrl.filter.archive.selected = 'false'" select="eventCtrl.alertMe('This table contains archived data that you can restore.')">
            <uib-tab-heading>
              Archived
              <span class="badge">{{(eventCtrl.entryList | filter: { active: 'false' }).length}}</span>
            </uib-tab-heading>
          </uib-tab>
        </uib-tabset>
      </div>
    </div>
    <div class="info" ng-repeat="entries in eventCtrl.entryList |
          filter: { name: eventCtrl.searchTags, active: eventCtrl.filter.archive.selected } | limitTo: 10:(eventCtrl.currentPage-1)*10">
      <div class="row">
        <div class="col-md-12">
          <h3>{{$index + 1}}. {{entries.name}}
          </h3>
          <h5>{{entries.startDate | date: "mediumDate"}} to {{entries.endDate | date: "mediumDate"}}</h5>
        </div>
      </div>
      <div class="row">
          <div class="col-md-12">
            <h4>
              <i class="fa fa-fw fa-info-circle"></i>Details</h4>
            <p>{{entries.event}}</p>
          </div>
        </div>
      <div class="row">
        <div class="col-md-6">
          <h4>
            <i class="fa fa-fw fa-envelope"></i>Message</h4>
          <p>{{entries.message}}</p>
        </div>
        <div class="col-md-6">
          <h4>
            <i class="fa fa-fw fa-tags"></i>Keywords</h4>
          <p>
            <ul class="tags">
              <li ng-repeat="tags in entries.tags">
                <span class="label label-danger" uib-tooltip="{{tags}}" tooltip-placement="top">
                  {{tags}}
                </span>
              </li>
            </ul>
          </p>
        </div>
      </div>
      <div class="row">
        <br>
        <div class="col-md-12 text-right">
          <div class="btn-group" ng-if="eventCtrl.filter.archive.selected == 'true'">
            <a ng-click="eventCtrl.getEntry(entries._id)" uib-tooltip="Edit {{entries.name}} Entry" tooltip-placement="top-right" class="btn btn-default">
              <i class="fa fa-fw fa-edit"></i>Edit</a>
            <a ng-click="eventCtrl.confirm = false; eventCtrl.confirmationId = entries._id; eventCtrl.confirmationName = 'archive'" uib-tooltip="WARNING!!! This action will archive this entry."
              tooltip-placement="top-right" class="btn btn-default">
              <i class="fa fa-fw fa-archive"></i>Archive</a>
          </div>
          <div class="btn-group" ng-if="eventCtrl.filter.archive.selected == 'false'">
            <a ng-click="eventCtrl.confirm = false; eventCtrl.confirmationId = entries._id; eventCtrl.confirmationName = 'restore'" uib-tooltip="WARNING!!! This action will restore this entry to the active list."
              tooltip-placement="top-right" class="btn btn-default" draggable="true">
              <i class="fa fa-fw fa-rotate-left"></i>Restore</a>
            <a ng-click="eventCtrl.confirm = false; eventCtrl.confirmationId = entries._id; eventCtrl.confirmationName = 'delete'" uib-tooltip="WARNING!!! This action will delete this entry."
              tooltip-placement="top-right" class="btn btn-danger">
              <i class="fa fa-fw fa-trash"></i>Delete</a>
          </div>
          <hr>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 text-center">
        <ul ng-click="eventCtrl.scrollTo('info')" uib-pagination total-items="(eventCtrl.entryList | filter: { name: eventCtrl.searchTags, active: eventCtrl.filter.archive.selected }).length"
          ng-model="eventCtrl.currentPage" max-size="5" class="pagination-sm" boundary-links="true" force-ellipses="true"></ul>
      </div>
    </div>
  </div>
</div>

<statusbar table-name="{{eventCtrl.dataInfo.name}}" table-entries="{{(eventCtrl.entryList | filter: { name: eventCtrl.searchTags, active: eventCtrl.filter.archive.selected }).length}}"
  action-message="{{eventCtrl.eventStatus}}"></statusbar>
